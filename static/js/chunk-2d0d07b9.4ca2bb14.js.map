{"version":3,"sources":["webpack:///./src/views/AlbumDetail.vue","webpack:///./src/views/AlbumDetail.vue?2af8"],"names":["class","style","size","showUploadDialog","type","refresh","photos","data","item","index","xs","key","span","lg","loading","ref","name","components","ItemImg","ImgCopper","UploadImg","options","value","label","search","page","pageSize","count","currentAlbumId","currentName","mounted","this","$route","query","id","listHttp","error","methods","selectLabel","timer","clearTimeout","setTimeout","console","dir","$refs","uploadPhoto","showDialog","_id","createList","result","http","httpPostBody","code","i","length","album","message","err","path","photo","list","keyword","albumId","__exports__","render"],"mappings":"+JACE,gCAAwC,MAApCA,MAAM,6BAA2B,S,GAChCC,MAAA,4D,GACEA,MAAA,sC,+BAmDA,Q,+BAIA,O,EAAG,gCACL,KADQD,MAAM,mBAAiB,S,EAGlC,gCAAwC,MAApCA,MAAM,6BAA2B,S,6fA5DvC,EACA,gCAyEM,MAzEN,EAyEM,CAxEJ,gCAyDM,MAzDN,EAyDM,C,mEAZJ,yBAOC,GANCE,KAAK,OACJ,QAAO,EAAAC,iBACRF,MAAA,qEACAG,KAAK,W,+BAEJ,iBAAI,C,+BADM,KAIb,yBAEa,GAFFA,KAAK,UAAW,QAAO,EAAAC,QAASH,KAAK,Q,+BAC7C,iBAAG,C,EAAA,M,sBAGR,E,4BACA,yBAYe,GAZ0BD,MAAA,0BAA2B,C,8BAClE,iBAUS,CAVT,yBAUS,Q,8BAPL,iBAAoC,E,2BAFtC,gCAQS,2CANiB,EAAAK,OAAOC,MAAI,SAA3BC,EAAMC,G,gCAFhB,yBAQS,GAPNC,GAAI,UAEJC,IAAKF,EACLG,KAAM,EACNC,GAAI,U,+BAEL,iBAAwB,CAAxB,yBAAwB,GAAdL,KAAMA,GAAI,qB,gDATD,EAAAF,OAAOQ,aAclC,yBAA0B,GAAfC,IAAI,UAAQ,UACvB,yBAA+B,GAApBA,IAAI,eAAa,W,8EAUf,GACbC,KAAM,cACNC,WAAY,CAAEC,QAAA,OAASC,UAAA,OAAWC,UAAA,QAClCb,KAHa,WAIX,MAAO,CACLc,QAAS,CAAC,CAAEC,MAAO,MAAOC,MAAO,MACjCD,MAAO,GACPE,OAAQ,GACRlB,OAAQ,CAAEQ,SAAS,EAAOW,KAAM,EAAGC,SAAU,GAAInB,KAAM,GAAIoB,MAAO,GAClEC,eAAgB,GAChBC,YAAa,KAGjBC,QAba,WAcXC,KAAKH,eAAiBG,KAAKC,OAAOC,MAAMC,GACxCH,KAAKF,YAAcE,KAAKC,OAAOC,MAAMjB,KACV,IAAvBe,KAAKH,eAITG,KAAKI,WAHH,OAAUC,MAAM,WAKpBC,QAAS,CACPC,YADO,SACKhB,GACNS,KAAKQ,OACPC,aAAaT,KAAKQ,OAEpBR,KAAKQ,MAAQE,YAAW,WACtBC,QAAQC,IAAIrB,KAEX,MAELnB,iBAVO,WAWL4B,KAAKa,MAAMC,YAAYC,WACrB,CAAEC,IAAKhB,KAAKH,eAAgBZ,KAAMe,KAAKF,aAAe,SACtDE,KAAKiB,aAGTA,WAhBO,SAgBIC,KACX5C,QAjBO,WAkBL0B,KAAKzB,OAAOmB,KAAO,EACnBM,KAAKI,YAEPA,SArBO,WAqBI,WACTJ,KAAKzB,OAAOQ,SAAU,EACtBoC,EAAA,KAAKC,cACH,SAACF,GAEC,GADA,EAAK3C,OAAOQ,SAAU,EACH,GAAfmC,EAAOG,KAAW,CACpB,EAAK9C,OAAOC,KAAO0C,EAAO1C,KAAKA,KAC/B,IAAK,IAAI8C,EAAI,EAAGA,EAAI,EAAK/C,OAAOC,KAAK+C,OAAQD,IAC3C,EAAK/C,OAAOC,KAAK8C,GAAGE,OAAQ,EAE9B,EAAKjD,OAAOqB,MAAQsB,EAAO1C,KAAKoB,WAEhC,OAAUS,MAAMa,EAAOO,YAG3B,SAACC,GACC,EAAKnD,OAAOQ,SAAU,EACtB,OAAUsB,MAAMqB,KAElB,OAAKC,KAAKC,MAAMC,KAChB,CACEnC,KAAMM,KAAKzB,OAAOmB,KAClBC,SAAUK,KAAKzB,OAAOoB,SACtBmC,QAAS9B,KAAKP,OACdsC,QAAS/B,KAAKH,oB,qBCrJxB,MAAMmC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"js/chunk-2d0d07b9.4ca2bb14.js","sourcesContent":["<template>\r\n  <hr class=\"d-block hr-space-nomargin\" />\r\n  <div style=\"height: 100%; display: flex; flex-flow: column nowrap\">\r\n    <div style=\"padding: 0.5rem; background: #fff\">\r\n      <!-- <span style=\"margin-left: 0.5rem; font-size: 12px; font-weight: bold\"\r\n        >切换相册：\r\n      </span>\r\n      <el-select\r\n        @change=\"selectLabel\"\r\n        size=\"mini\"\r\n        style=\"width: 120px; margin-right: 2rem; margin-bottom: 0.5rem\"\r\n        v-model=\"value\"\r\n        placeholder=\"全部\"\r\n      >\r\n        <el-option\r\n          v-for=\"item in options\"\r\n          :key=\"item.value\"\r\n          :label=\"item.label\"\r\n          :value=\"item.value\"\r\n        />\r\n      </el-select> -->\r\n\r\n      <el-input\r\n        v-if=\"false\"\r\n        style=\"width: 280px; margin-bottom: 0.5rem; margin-right: 1rem\"\r\n        v-model=\"search\"\r\n        placeholder=\"Please input\"\r\n        class=\"input-with-select\"\r\n      >\r\n        <!--   <template #prepend>\r\n          <el-select v-model=\"select\" placeholder=\"Select\" style=\"width: 110px\">\r\n            <el-option label=\"Restaurant\" value=\"1\"></el-option>\r\n            <el-option label=\"Order No.\" value=\"2\"></el-option>\r\n            <el-option label=\"Tel\" value=\"3\"></el-option>\r\n          </el-select>\r\n        </template> -->\r\n        <template #append>\r\n          <el-button type=\"primary\" v-loading=\"false\">搜索</el-button>\r\n        </template>\r\n      </el-input>\r\n\r\n      <!--<el-button\r\n        style=\"margin-right: 1rem; margin-bottom: 0.5rem; margin-left: 0px\"\r\n        type=\"primary\"\r\n        @click=\"createAlbum\"\r\n        v-loading=\"false\"\r\n        >新建相册</el-button\r\n      >-->\r\n      <el-button\r\n        size=\"mini\"\r\n        @click=\"showUploadDialog\"\r\n        style=\"margin-right: 1rem; margin-bottom: 0.1rem; margin-left: 0px\"\r\n        type=\"primary\"\r\n        v-loading=\"false\"\r\n        >上传图片</el-button\r\n      >\r\n\r\n      <el-button type=\"warning\" @click=\"refresh\" size=\"mini\"\r\n        >刷新 <i class=\"el-icon-refresh\"></i\r\n      ></el-button>\r\n    </div>\r\n    <hr class=\"d-block hr-space-nomargin\" />\r\n    <el-scrollbar v-loading=\"photos.loading\" style=\"margin-bottom: 36px\">\r\n      <el-row>\r\n        <el-col\r\n          :xs=\"{ span: 12 }\"\r\n          v-for=\"(item, index) in photos.data\"\r\n          :key=\"index\"\r\n          :span=\"8\"\r\n          :lg=\"{ span: 6 }\"\r\n        >\r\n          <ItemImg :item=\"item\" />\r\n        </el-col>\r\n      </el-row>\r\n    </el-scrollbar>\r\n  </div>\r\n  <ImgCopper ref=\"copper\" />\r\n  <UploadImg ref=\"uploadPhoto\" />\r\n</template>\r\n\r\n<script>\r\nimport ItemImg from \"../components/item_img.vue\";\r\nimport ImgCopper from \"../components/dialog-img-copper.vue\";\r\nimport UploadImg from \"../components/dialog-upload-img.vue\";\r\nimport { urls, http } from \"../http/index.js\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nexport default {\r\n  name: \"AlbumDetail\",\r\n  components: { ItemImg, ImgCopper, UploadImg },\r\n  data() {\r\n    return {\r\n      options: [{ value: \"all\", label: \"1\" }],\r\n      value: \"\",\r\n      search: \"\",\r\n      photos: { loading: false, page: 1, pageSize: 20, data: [], count: 0 },\r\n      currentAlbumId: \"\",\r\n      currentName: \"\",\r\n    };\r\n  },\r\n  mounted() {\r\n    this.currentAlbumId = this.$route.query.id;\r\n    this.currentName = this.$route.query.name;\r\n    if (this.currentAlbumId == \"\") {\r\n      ElMessage.error(\"相册ID错误\");\r\n      return;\r\n    }\r\n    this.listHttp();\r\n  },\r\n  methods: {\r\n    selectLabel(value) {\r\n      if (this.timer) {\r\n        clearTimeout(this.timer);\r\n      }\r\n      this.timer = setTimeout(function () {\r\n        console.dir(value);\r\n        // todo 搜索\r\n      }, 1000);\r\n    },\r\n    showUploadDialog() {\r\n      this.$refs.uploadPhoto.showDialog(\r\n        { _id: this.currentAlbumId, name: this.currentName || \"[未命名]\" },\r\n        this.createList\r\n      );\r\n    },\r\n    createList(result) {},\r\n    refresh() {\r\n      this.photos.page = 1;\r\n      this.listHttp();\r\n    },\r\n    listHttp() {\r\n      this.photos.loading = true;\r\n      http.httpPostBody(\r\n        (result) => {\r\n          this.photos.loading = false;\r\n          if (result.code == 0) {\r\n            this.photos.data = result.data.data;\r\n            for (var i = 0; i < this.photos.data.length; i++) {\r\n              this.photos.data[i].album = false;\r\n            }\r\n            this.photos.count = result.data.count;\r\n          } else {\r\n            ElMessage.error(result.message);\r\n          }\r\n        },\r\n        (err) => {\r\n          this.photos.loading = false;\r\n          ElMessage.error(err);\r\n        },\r\n        urls.path.photo.list,\r\n        {\r\n          page: this.photos.page,\r\n          pageSize: this.photos.pageSize,\r\n          keyword: this.search,\r\n          albumId: this.currentAlbumId,\r\n        }\r\n      );\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./AlbumDetail.vue?vue&type=template&id=12b742bf\"\nimport script from \"./AlbumDetail.vue?vue&type=script&lang=js\"\nexport * from \"./AlbumDetail.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/mnt/e/work/life/life_index/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}